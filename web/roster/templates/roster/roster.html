{% extends "base.html" %}
{% block content %}

<div class="container mt-4">
    <h1 class="mb-4">Character Roster</h1>

    <div class="nav nav-tabs mb-3">
        <a class="nav-link active" href="#" onclick="showTab('available'); return false;">Available</a>
        <a class="nav-link" href="#" onclick="showTab('active'); return false;">Active</a>
        <a class="nav-link" href="#" onclick="showTab('gone'); return false;">Gone</a>
    </div>

    <div id="available" class="roster-tab">
        <div class="card">
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead class="table-light">
                            <tr>
                                <th>Name</th>
                                <th>Concept</th>
                                <th>Gender</th>
                                <th>Age</th>
                                <th>Realm</th>
                            </tr>
                        </thead>
                        <tbody>
                        {% for char, concept, display_name in available_chars %}
                            <tr>
                                <td><a href="/characters/detail/{{ char.name|lower }}/{{ char.id }}/">{{ display_name }}</a></td>
                                <td>{{ concept }}</td>
                                <td>{{ char.db.gender }}</td>
                                <td>{{ char.db.age }}</td>
                                <td>{{ char.db.realm }}</td>
                            </tr>
                        {% empty %}
                            <tr>
                                <td colspan="5" class="text-center">No characters available</td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div id="active" class="roster-tab" style="display: none;">
        <div class="card">
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead class="table-light">
                            <tr>
                                <th>Name</th>
                                <th>Concept</th>
                                <th>Gender</th>
                                <th>Age</th>
                                <th>Realm</th>
                                <th>Player</th>
                            </tr>
                        </thead>
                        <tbody>
                        {% for char, concept, display_name in active_chars %}
                            <tr>
                                <td><a href="/characters/detail/{{ char.name|lower }}/{{ char.id }}/">{{ display_name }}</a></td>
                                <td>{{ concept }}</td>
                                <td>{{ char.db.gender }}</td>
                                <td>{{ char.db.age }}</td>
                                <td>{{ char.db.realm }}</td>
                                <td>{{ char.account.username }}</td>
                            </tr>
                        {% empty %}
                            <tr>
                                <td colspan="6" class="text-center">No active characters</td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div id="gone" class="roster-tab" style="display: none;">
        <div class="card">
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead class="table-light">
                            <tr>
                                <th>Name</th>
                                <th>Concept</th>
                                <th>Gender</th>
                                <th>Age</th>
                                <th>Realm</th>
                            </tr>
                        </thead>
                        <tbody>
                        {% for char, concept, display_name in gone_chars %}
                            <tr>
                                <td><a href="/characters/detail/{{ char.name|lower }}/{{ char.id }}/">{{ display_name }}</a></td>
                                <td>{{ concept }}</td>
                                <td>{{ char.db.gender }}</td>
                                <td>{{ char.db.age }}</td>
                                <td>{{ char.db.realm }}</td>
                            </tr>
                        {% empty %}
                            <tr>
                                <td colspan="5" class="text-center">No retired characters</td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.nav-link {
    cursor: pointer;
}
.nav-link.active {
    color: #0d6efd;
    border-color: #dee2e6 #dee2e6 #fff;
    background-color: #fff;
    border-bottom: 2px solid #0d6efd;
}
</style>

<script>
function showTab(tabName) {
    // Hide all tabs
    document.querySelectorAll('.roster-tab').forEach(tab => {
        tab.style.display = 'none';
    });
    // Show the selected tab
    document.getElementById(tabName).style.display = 'block';
    // Update active state of nav links
    document.querySelectorAll('.nav-link').forEach(link => {
        link.classList.remove('active');
        if (link.textContent.toLowerCase() === tabName) {
            link.classList.add('active');
        }
    });
}
</script>

{% endblock %} 